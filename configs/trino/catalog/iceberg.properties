# Iceberg Catalog Configuration for Trino
# Purpose: Connect to Apache Iceberg tables stored in MinIO (S3-compatible)
# Metadata: Hive Metastore catalog
# Storage: MinIO object storage

# === Connector Configuration ===
connector.name=iceberg

# === Catalog Type ===
# Using Hive Metastore as the Iceberg catalog backend
iceberg.catalog.type=hive_metastore

# === Hive Metastore Connection ===
hive.metastore.uri=thrift://hive-metastore:9083

# === S3 Configuration (MinIO) ===
# MinIO is S3-compatible object storage
hive.s3.endpoint=http://minio:9000
hive.s3.path-style-access=true
hive.s3.aws-access-key=admin
hive.s3.aws-secret-key=password123

# S3 bucket for Iceberg warehouse
hive.s3.region=us-east-1

# SSL/TLS Configuration (disabled for local MinIO)
hive.s3.ssl.enabled=false

# === Iceberg Table Properties ===
# Default file format for new tables
iceberg.file-format=PARQUET

# Compression codec
iceberg.compression-codec=ZSTD

# === Performance Tuning ===
# Enable metadata caching
hive.metastore-cache-ttl=10m
hive.metastore-refresh-interval=5m

# Iceberg-specific optimizations
iceberg.max-partitions-per-writer=100
iceberg.minimum-assigned-split-weight=0.05

# === Query Optimization ===
# Enable predicate pushdown
iceberg.pushdown-filter-enabled=true

# Enable statistics for query optimization
iceberg.extended-statistics.enabled=true

# === Time Travel ===
# Enable time travel queries (AS OF timestamp)
iceberg.time-travel-enabled=true

# === Schema Evolution ===
# Allow schema changes
iceberg.schema-evolution.enabled=true

# === Hidden Partitions ===
# Enable hidden partitioning (users don't specify partitions in queries)
iceberg.hidden-partitioning.enabled=true

# === Security ===
# No authentication required for local development
hive.metastore.authentication.type=NONE

# === Warehouse Location ===
# Root directory for Iceberg tables in MinIO
iceberg.catalog.warehouse=s3://warehouse/
